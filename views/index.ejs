<!-- views/index.ejs -->
<% layout('layout') %>

<!-- Sleek Black & Gold Banner -->
<div
  class="jumbotron jumbotron-fluid text-light mb-0 hero-banner"
  style="
    background: linear-gradient(45deg, #000 0%, #333 100%);
    min-height: 200px;
  "
>
  <div class="container py-4 text-center">
    <h1 class="display-4 font-weight-bold" style="font-family: 'Bebas Neue', sans-serif;">
      WokeOrNot
    </h1>
    <p class="lead" style="font-family: 'Poppins', sans-serif;">
      Rate the Wokeness of Your Favorite TV Shows & Movies
    </p>
    <% if (!user) { %>
      <a href="/auth/register" class="btn btn-warning btn-lg animated-button">
        Join Now
      </a>
    <% } %>
  </div>
</div>

<div class="container mt-4">
  <h3 class="text-warning mb-3" style="font-family: 'Bebas Neue', sans-serif;">
    <i class="fas fa-fire"></i> Trending This Week
  </h3>
  <div class="row">
    <% trending.forEach(item => { %>
      <div class="col-md-3 col-sm-6 mb-4 position-relative" data-aos="fade-up">
        <div class="card h-100 hover-zoom">
          <% if(item.poster_path) { %>
            <img
              src="https://image.tmdb.org/t/p/w500<%= item.poster_path %>"
              class="card-img-top"
              alt="<%= item.title || item.name %>"
            >
          <% } %>
          <!-- Rating Badge -->
          <span class="badge rating-badge">
            <% if (item.averageRating !== null) { %>
              <%= item.averageRating.toFixed(1) %>/10
            <% } else { %>
              No Ratings
            <% } %>
          </span>
          <div class="card-body">
            <h6 class="card-title" style="font-family: 'Poppins', sans-serif;">
              <%= item.title || item.name %>
            </h6>
            <!-- One-click rating -->
            <a
              href="/movies/trending/<%= item.id %>"
              class="btn btn-sm btn-outline-warning"
            >
              Rate Now
            </a>
          </div>
        </div>
      </div>
    <% }) %>
  </div>
</div>
