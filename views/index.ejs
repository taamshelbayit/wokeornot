<% layout('layout') %>

<div id="heroCarousel" class="carousel slide carousel-fade" data-ride="carousel">
  <!-- Indicators, etc. -->
  <div class="carousel-inner">
    <% heroItems.forEach((item, idx) => { %>
      <div class="carousel-item hero-slide <%= idx === 0 ? 'active' : '' %>">
        <div
          class="hero-slide-content d-flex align-items-center justify-content-center"
          style="
            background: url('https://image.tmdb.org/t/p/original<%= item.poster_path %>')
                      center/cover no-repeat;
            min-height: 500px;
          "
        >
          <div class="container text-center">
            <h1><%= item.title || item.name %></h1>
            <p>Trending Now</p>
            <a href="/movies/add?tmdbId=<%= item.id %>" class="btn btn-warning btn-lg animated-button">
              Rate This
            </a>
          </div>
        </div>
      </div>
    <% }) %>
  </div>
  <!-- Prev/Next controls -->
</div>

<!-- Then your "Top 5" sections with .scroll-container -->
<div class="container mt-4">
  <h3 class="text-warning mb-3" style="font-family: 'Bebas Neue', sans-serif;">
    Top 5 Most Woke Movies
  </h3>
  <div class="scroll-container position-relative">
    <button class="scroll-btn left-btn" data-target="topMoviesScroll">
      <i class="fas fa-chevron-left"></i>
    </button>
    <div class="scroll-wrapper" id="topMoviesScroll">
      <% topMovies.forEach(m => { %>
        <div class="scroll-item card hover-zoom" data-aos="fade-up">
          <% if (m.posterPath) { %>
            <img
              src="https://image.tmdb.org/t/p/w500<%= m.posterPath %>"
              class="card-img-top"
              alt="<%= m.title %>"
            >
          <% } %>
          <div class="card-body">
            <h5 class="card-title"><%= m.title %></h5>
            <% if (m.ratings && m.ratings.length > 0) { %>
              <div class="woke-meter mb-2">
                <div
                  class="woke-meter-fill"
                  style="width:<%= (m.averageRating / 10) * 100 %>%;"
                ></div>
              </div>
              <p class="mb-1" style="color:#bbb;">
                <%= m.averageRating.toFixed(1) %>/10
                <% if (m.notWokeCount > 0) { %>
                  - <%= m.notWokeCount %> Not Woke
                <% } %>
              </p>
            <% } else if (m.notWokeCount > 0) { %>
              <p><%= m.notWokeCount %> Not Woke</p>
            <% } else { %>
              <p>No Ratings</p>
            <% } %>
            <a href="/movies/<%= m._id %>" class="btn btn-sm btn-outline-warning">View</a>
          </div>
        </div>
      <% }) %>
    </div>
    <button class="scroll-btn right-btn" data-target="topMoviesScroll">
      <i class="fas fa-chevron-right"></i>
    </button>
  </div>
</div>
