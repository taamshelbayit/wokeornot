<!-- views/movie.ejs -->
<% layout('layout') %>

<div class="container mt-4 movie-details text-light">
  <div class="row">
    <div class="col-md-4">
      <% if (movie.posterPath) { %>
        <img
          src="https://image.tmdb.org/t/p/w500<%= movie.posterPath %>"
          class="img-fluid mb-3"
          alt="<%= movie.title %>"
        >
      <% } %>
    </div>
    <div class="col-md-8">
      <h2 style="font-family: 'Bebas Neue', sans-serif;">
        <%= movie.title %>
      </h2>
      <p><%= movie.description %></p>
      <p>
        <strong>Average Woke Rating:</strong>
        <%= movie.averageRating.toFixed(1) %>/10
      </p>

      <!-- Category Gradience -->
      <% if (categoryCounts && categoryCounts.length > 0) { %>
        <h5 class="text-warning" style="font-family: 'Bebas Neue', sans-serif;">
          Woke Categories Chosen:
        </h5>
        <ul>
          <% categoryCounts.forEach(cc => { %>
            <li><strong><%= cc.category %>:</strong> <%= cc.count %></li>
          <% }) %>
        </ul>
      <% } %>
    </div>
  </div>
</div>

<hr class="bg-secondary">

<!-- Review Form -->
<div class="container mt-5 text-light">
  <h3 class="text-warning" style="font-family: 'Bebas Neue', sans-serif;">
    Add Your Rating
  </h3>
  <form
    action="/reviews/add/<%= movie._id %>"
    method="POST"
    class="p-4 border bg-dark"
    data-aos="fade-up"
  >
    ...
  </form>
</div>

<hr class="bg-secondary">

<!-- Display Existing Reviews -->
<div class="container mt-4 text-light">
  <h3 class="text-warning" style="font-family: 'Bebas Neue', sans-serif;">
    User Reviews
  </h3>
  ...
</div>

<hr class="bg-secondary">

<!-- Discussion Forum -->
<div class="container forum mt-4 text-light">
  <h3 class="text-warning" style="font-family: 'Bebas Neue', sans-serif;">
    Discussion Forum
  </h3>
  <form
    action="/forum/add/<%= movie._id %>"
    method="POST"
    class="p-4 border bg-dark"
    data-aos="fade-up"
  >
    ...
  </form>
  ...
</div>
