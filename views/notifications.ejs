<% layout('layout') %>

<div class="container mt-4 text-light">
  <h2 class="text-warning" style="font-family: 'Bebas Neue', sans-serif;">Notifications</h2>

  <% if (notifications.length === 0) { %>
    <p>No notifications yet.</p>
  <% } else { %>
    <form action="/notifications/mark-read" method="POST" class="mb-3">
      <button class="btn btn-warning">Mark All as Read</button>
    </form>

    <% notifications.forEach(n => { %>
      <div class="card mb-3 notification-card <%= n.read ? '' : 'unread' %>" style="background-color: #1e1e1e; color: #fff;">
        <div class="card-body">
          <p><%= n.message %></p>
          <% if (n.link) { %>
            <!-- If a link is provided, make the notification clickable -->
            <a href="<%= n.link %>" class="text-warning">View details</a>
          <% } %>
          <small class="text-muted d-block">Received: <%= n.createdAt.toDateString() %></small>
        </div>
      </div>
    <% }) %>
  <% } %>
</div>
